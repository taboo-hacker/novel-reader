<div align="center">
  <h1>Novel Reader</h1>
  <p>轻量级本地小说阅读器 Web 应用，基于 Python 标准库实现，无需额外依赖，支持自动解析 ZIP 压缩包中的飞卢小说文本，提供智能分章处理和响应式 Web 阅读界面，适配多种设备。</p>
</div>

![Python](https://img.shields.io/badge/Python-3.7+-blue)
![License](https://img.shields.io/badge/License-GNU%20GPL%20v3.0-green)
![Platform](https://img.shields.io/badge/Platform-Windows%20%7C%20Linux%20%7C%20macOS-orange)

## � 项目简介

Novel Reader 是一款专为小说爱好者设计的本地阅读工具，通过 Web 界面提供沉浸式阅读体验。本项目采用纯 Python 标准库实现，无需安装额外依赖，可在任何支持 Python 3.7+ 的平台上运行。

### 核心价值
- **零依赖部署**：仅使用 Python 标准库，无需复杂的依赖管理
- **本地化处理**：所有数据存储在本地，保护用户隐私
- **高效解析**：智能识别小说章节结构，快速处理压缩包文件
- **跨设备访问**：响应式设计，支持桌面端和移动端浏览

## �📦 项目结构

```
novel-reader/
├── src/                 # 源代码目录
│   ├── parsers/         # 解析器目录
│   │   ├── novel_parser.py  # 小说章节解析器
│   │   └── zip_parser.py    # ZIP 文件处理器
│   ├── generators/      # 生成器目录
│   │   └── html_generator.py  # HTML 生成器
│   ├── utils/           # 工具函数目录
│   │   └── helpers.py   # 辅助函数
│   ├── config.py        # 配置文件
│   ├── server.py        # HTTP 服务器实现
│   └── main.py          # 主程序入口
├── static/              # 静态文件目录
│   ├── css/             # 样式表文件目录
│   │   └── style.css    # 样式表文件
│   └── js/              # JavaScript 文件目录
│       └── app.js       # 前端脚本
├── templates/           # 模板文件目录
├── xs/                  # 存放小说 ZIP 文件的目录
├── logs/                # 日志文件目录
├── main.py              # 项目入口文件
└── README.md            # 项目说明文件
```

## 🛠️ 技术栈

| 类别 | 技术/库 | 版本/要求 | 用途 |
|------|---------|-----------|------|
| 后端 | Python | 3.7+ | 核心运行环境 |
| 后端 | http.server | 标准库 | 内置 HTTP 服务器 |
| 前端 | HTML5 | - | 页面结构 |
| 前端 | CSS3 | - | 页面样式 |
| 前端 | JavaScript | ES6+ | 交互逻辑 |
| 文件处理 | zipfile | 标准库 | ZIP 压缩包解析 |
| 日志管理 | logging | 标准库 | 系统日志记录 |

## 🚀 快速开始

### 前置要求

- Python 3.7+ 运行环境
- 飞卢小说 ZIP 文件（需放置在项目目录的 `xs/` 文件夹下）

### 安装与启动

1. **克隆仓库**：

   ```bash
   git clone https://github.com/taboo-hacker/novel-reader.git
   cd novel-reader
   ```

2. **准备小说文件**：

   将飞卢小说 ZIP 文件放入 `xs/` 目录，文件名格式应为 `小说名.zip`。

3. **启动服务**：

   ```bash
   python main.py
   ```

4. **访问应用**：

   打开浏览器，访问 [http://localhost:8080](http://localhost:8080) 即可开始阅读。

## ⚡ 功能特性

### 核心功能
- **智能分章**：自动识别小说章节结构，精确分割章节内容
- **即点即读**：点击章节名称立即加载对应内容，无需等待
- **深色模式**：支持浅色/深色主题切换，保护视力，提升阅读体验
- **字体调整**：可根据个人偏好调整字体大小，适应不同阅读习惯
- **书签系统**：自动记录阅读进度，支持手动添加书签
- **章节导航**：提供上一章/下一章快速跳转，方便阅读连续内容

### 技术特性
- **响应式设计**：适配桌面端、平板和移动设备屏幕
- **跨平台兼容**：支持 Windows、Linux、macOS 等主流操作系统
- **无数据库依赖**：纯文件系统存储，简化部署和维护
- **缓存机制**：实现小说解析结果缓存，提高重复访问性能
- **安全路径处理**：防止目录遍历攻击，保障系统安全
- **详细日志**：完整记录系统运行状态，便于故障排查

## 📝 配置选项

通过修改 `src/config.py` 文件，可以自定义以下配置项：

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| `PORT` | 8080 | 服务监听端口 |
| `XS_DIR` | `./xs` | 小说文件存储目录 |
| `STATIC_DIR` | `./static` | 静态资源文件目录 |
| `TEMPLATES_DIR` | `./templates` | HTML 模板文件目录 |
| `LOGS_DIR` | `./logs` | 日志文件存储目录 |
| `LOG_LEVEL` | `INFO` | 日志记录级别 |
| `TARGET` | `飞卢小说` | 支持的小说类型 |
| `ENDSWITH` | `.zip` | 小说文件扩展名 |

## 🔧 开发指南

### 环境搭建

1. **克隆仓库**：
   ```bash
   git clone https://github.com/taboo-hacker/novel-reader.git
   ```

2. **安装开发依赖**（可选）：
   本项目仅使用 Python 标准库，无需额外安装依赖。

### 代码规范
- 遵循 PEP 8 代码风格指南
- 为所有函数和方法添加详细的文档字符串
- 确保类型提示的准确性
- 实现完整的异常处理

### 贡献流程
1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## ⚠️ 免责声明

1. 本软件（Novel Reader）仅提供小说阅读的技术工具，不存储、不爬取、不编辑任何小说内容，也不直接提供任何小说资源。
2. 本软件严禁用户利用其进行任何侵犯他人著作权的行为（包括但不限于盗版小说的抓取、传播、存储等），所有用户的内容获取行为均由用户自行负责。
3. 如用户使用本软件从事任何侵权行为，产生的一切法律责任（包括但不限于民事赔偿、行政处罚、刑事责任）均由用户本人承担，本软件开发者不承担任何连带责任。
4. 若本软件中出现任何侵权内容，权利人可通过邮箱（leo43991314520@outlook.com）联系我们，我们将在第一时间配合处理相关内容。
5. 本软件开发者尊重并保护所有著作权人的合法权益，坚决反对任何形式的盗版行为。

**特别说明**：本项目 `xs/` 文件夹中存放的内容完全是从官方网站下载的正版免费内容，不存在任何侵权行为。

## 📜 开源协议

本项目根据 [GNU General Public License v3.0](LICENSE) 授权。详情请参阅 [LICENSE](LICENSE) 文件。

## 📞 联系方式

如有任何问题或建议，欢迎通过以下方式联系我们：

- 邮箱：leo43991314520@outlook.com
- GitHub：[@taboo-hacker](https://github.com/taboo-hacker)

## ❓ 常见问题

**Q: 为什么只支持飞卢小说格式？**
A: 目前项目主要针对飞卢小说的文本结构进行了优化，后续版本计划支持更多小说网站的格式。

**Q: 如何添加自定义小说？**
A: 将小说内容打包为 ZIP 文件，放入 `xs/` 目录即可。确保 ZIP 文件中包含正确格式的文本文件。

**Q: 服务启动后无法访问怎么办？**
A: 请检查端口 8080 是否被占用，或修改 `src/config.py` 中的 `PORT` 配置项使用其他端口。

**Q: 如何修改默认的小说存储目录？**
A: 修改 `src/config.py` 中的 `XS_DIR` 配置项即可。

## 📋 更新日志

### v1.0.2 (2026-02-09)

- **Bug 修复**：
  - 修复了压缩包文件解析模块中小概率出现的文件选择逻辑错误
  - 修复了目录页面缺少返回主页功能的缺陷
- **功能完善**：
  - 优化了压缩包文件选择的异常处理逻辑
- **合规性优化**：
  - 新增版权相关免责声明
- **测试资源调整**：
  - 替换测试用压缩包，规避版权风险

### v1.0.1 (2026-02-09)

- **功能增强**：
  - 在章节导航中添加了返回目录功能
  - 在章节导航中添加了返回首页功能
- **前端改进**：
  - 优化了章节导航的布局和样式
  - 为返回首页和返回目录按钮添加了特殊样式
  - 改进了导航按钮的响应式设计

### v1.0.0 (2026-02-09)

- **项目结构重构**：创建了合理的目录组织，实现了模块化设计
- **代码质量改进**：添加了详细的类型提示、异常处理和文档字符串
- **功能增强**：
  - 实现了深色模式切换功能
  - 添加了字体大小调整功能
  - 实现了书签添加和恢复功能
  - 添加了章节导航功能
  - 实现了响应式设计
- **性能优化**：实现了缓存机制，提高小说解析性能
- **安全性改进**：实现了安全的路径处理，防止目录遍历攻击
- **前端改进**：创建了现代化的 CSS 样式，添加了流畅的动画效果
- **配置系统**：简化了配置系统，提高了可维护性
- **日志系统**：完善了日志系统，提供更详细的日志信息

### v0.1.0-beta.1 (2025-10-21)

- **核心功能**：实现了小说解析、章节分割和 Web 阅读界面
- **基本特性**：支持 ZIP 文件处理、自动分章和基本的 Web 界面
